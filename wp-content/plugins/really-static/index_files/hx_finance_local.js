function SwitchNewsTags(c,a,b){ClearTagClasss(c,b);document.getElementById("tagname_"+c+a).className="hbtagf";document.getElementById(c+a).className="hbShow"}function ClearTagClasss(b,a){for(i=1;i<=a;i++){document.getElementById("tagname_"+b+i).className="hbtagn";document.getElementById(b+i).className="hbHidden"}}function SwitchNewsTags01(c,a,b){ClearTagClasss01(c,b);document.getElementById("tagname_"+c+a).className="hbtagf01";document.getElementById(c+a).className="hbShow"}function ClearTagClasss01(b,a){for(i=1;i<=a;i++){document.getElementById("tagname_"+b+i).className="hbtagn01";document.getElementById(b+i).className="hbHidden"}}function SwitchNewsTags02(c,a,b){ClearTagClasss02(c,b);document.getElementById("tagname_"+c+a).className="hbtagf02";document.getElementById(c+a).className="hbShow"}function ClearTagClasss02(b,a){for(i=1;i<=a;i++){document.getElementById("tagname_"+b+i).className="hbtagn02";document.getElementById(b+i).className="hbHidden"}}function SwitchNewsTags03(c,a,b){ClearTagClasss03(c,b);document.getElementById("tagname_"+c+a).className="hbtagf03";document.getElementById(c+a).className="hbShow"}function ClearTagClasss03(b,a){for(i=1;i<=a;i++){document.getElementById("tagname_"+b+i).className="hbtagn03";document.getElementById(b+i).className="hbHidden"}}function GetObj(objName){if(document.getElementById){return eval('document.getElementById("'+objName+'")')}else{return eval("document.all."+objName)}}function AutoPlay(){clearInterval(AutoPlayObj);AutoPlayObj=setInterval("ISL_GoDown();ISL_StopDown();",5000)}function ISL_PageList(){var b,a="";for(b=1;b<=ISL_Pages;b++){a+="<img src='http://img.hexun.com/finance/index/fina_pa01.gif' class='"+(ISL_Page==b?"dotON":"dotOFF")+"' onclick='ISL_GotoPage("+b+")' alt='"+b+"页' />"}GetObj("dotList").innerHTML=a}function ISL_GotoPage(a){if(MoveLock){return}MoveLock=true;GotoLock=true;Comp=(a-1)*PageWidth-GetObj("ISL_Cont").scrollLeft;ISL_Page=a;clearInterval(AutoPlayObj);CompScr();AutoPlay()}function ISL_GoUp(){if(MoveLock){return}clearInterval(AutoPlayObj);MoveLock=true;MoveTimeObj=setInterval("ISL_ScrUp();",Speed)}function ISL_StopUp(){if(GotoLock){return}clearInterval(MoveTimeObj);if((GetObj("ISL_Cont").scrollLeft-fill)%PageWidth!=0){Comp=fill-(GetObj("ISL_Cont").scrollLeft%PageWidth);CompScr()}else{MoveLock=false}AutoPlay()}function ISL_ScrUp(){if(GetObj("ISL_Cont").scrollLeft<=0){GetObj("ISL_Cont").scrollLeft=GetObj("ISL_Cont").scrollLeft+GetObj("List1").offsetWidth}GetObj("ISL_Cont").scrollLeft-=Space}function ISL_GoDown(){clearInterval(MoveTimeObj);if(MoveLock){return}clearInterval(AutoPlayObj);MoveLock=true;ISL_ScrDown();MoveTimeObj=setInterval("ISL_ScrDown()",Speed)}function ISL_StopDown(){if(GotoLock){return}clearInterval(MoveTimeObj);if(GetObj("ISL_Cont").scrollLeft%PageWidth-(fill>=0?fill:fill+1)!=0){Comp=PageWidth-GetObj("ISL_Cont").scrollLeft%PageWidth+fill;CompScr()}else{MoveLock=false}AutoPlay()}function ISL_ScrDown(){if(GetObj("ISL_Cont").scrollLeft>=GetObj("List1").scrollWidth){GetObj("ISL_Cont").scrollLeft=GetObj("ISL_Cont").scrollLeft-GetObj("List1").scrollWidth}GetObj("ISL_Cont").scrollLeft+=Space}function CompScr(){if(Comp==0){ISL_Page=Math.round((GetObj("ISL_Cont").scrollLeft-fill)/PageWidth)+1;if(ISL_Page>ISL_Pages){ISL_Page=1}MoveLock=false;GotoLock=false;return}var a;var c=Speed,b=Space;if(Math.abs(Comp)<PageWidth/5){b=Math.round(Math.abs(Comp/5));if(b<1){b=1}}if(Comp<0){if(Comp<-b){Comp+=b;a=b}else{a=-Comp;Comp=0}GetObj("ISL_Cont").scrollLeft-=a;setTimeout("CompScr()",c)}else{if(Comp>b){Comp-=b;a=b}else{a=Comp;Comp=0}GetObj("ISL_Cont").scrollLeft+=a;setTimeout("CompScr()",c)}}function extend(){var b=document.getElementById("extMenu");var a=document.getElementById("extImg");if(b!=null&&a!=null){if(b.style.overflowY==null||b.style.overflowY==""||b.style.overflowY=="hidden"){b.style.height="auto";b.style.overflowY="auto";a.src="http://img.hexun.com/finance/index/cbh105.gif"}else{b.style.height="28px";b.style.overflowY="hidden";a.src="http://img.hexun.com/finance/index/cbh103.gif"}}}function extendOver(a){a.style.background="#e5ebf9"}function extendOut(a){a.style.background="#fff"}var $=function(a){if(typeof a=="string"){a=document.getElementById(a)}return a};var setNoticeList=function(b,l,g,f){if(typeof b=="string"){b=$(b)}if(typeof b=="undefined"||!b){return}if(typeof l=="undefined"||l==null){l=2}if(typeof g=="undefined"||g==null){g=10000}if(typeof f=="undefined"||f==null){f=30}var a=b.getElementsByTagName("li");var c=a.length;var h=c>0?a[0].offsetHeight:0;var d=null;var e=null;var k=false;b.onmouseover=function(){k=true};b.onmouseout=function(){k=false};var j=function(o,q){clearInterval(d);clearTimeout(e);var p=0;var r=function(){d=setInterval(n,f)};var m=function(){var v=b.getElementsByTagName("li");var u=0;var s=b.scrollTop;while(s>=h){s-=h;b.appendChild(v[u++])}b.scrollTop=0};var n=function(){if(k){return}var t=b.getElementsByTagName("li");b.scrollTop+=2;var s=b.scrollTop%h;if(s==0||s==1||s==-1){clearInterval(d);b.appendChild(t[0]);b.scrollTop=0;e=setTimeout(r,o)}};m();r()};j(g)};window.onload=function(){setNoticeList("worldindexlist",1,5000,50);setNoticeList("broadcastlist",1,2000,50)};function keyEncode(f){var a="";var e="!\"#$%&'()*+,/:;<=>?[]^`{|}~%";for(var b=0;b<f.length;b++){var d=f.charAt(b);var g=str2asc(d);if(parseInt("0x"+g)>127){a+="%"+g.slice(0,2)+"%"+g.slice(-2)}else{if(d==" "){a+="+"}else{if(e.indexOf(d)!=-1){a+="%"+g.toString(16)}else{a+=d}}}}return a}if(typeof Baidu=="undefined"){var Baidu={}}Baidu.namespace=function(){var b=arguments,g=null,e,c,f;for(e=0;e<b.length;e=e+1){f=b[e].split(".");g=Baidu;for(c=(f[0]=="Baidu")?1:0;c<f.length;c=c+1){g[f[c]]=g[f[c]]||{};g=g[f[c]]}}return g};Baidu.init=function(){this.namespace("util","widget")};Baidu.lang={isArray:function(a){if(a&&a.constructor&&a.constructor.toString().indexOf("Array")>-1){return true}else{return Baidu.lang.isObject(a)&&a.constructor==Array}},isFunction:function(a){return typeof a=="function"},isObject:function(a){return a&&(typeof a=="object"||Baidu.lang.isFunction(a))},isString:function(a){return typeof a=="string"},isNumber:function(a){return typeof a=="number"&&isFinite(a)}};Baidu.init();(function(){var c=Baidu.util,k,h,g=0,j={};var b=navigator.userAgent.toLowerCase(),d=(b.indexOf("opera")>-1),m=(b.indexOf("safari")>-1),a=(!d&&!m&&b.indexOf("gecko")>-1),f=(!d&&b.indexOf("msie")>-1);var e={HYPHEN:/(-[a-z])/i,ROOT_TAG:/body|html/i};var l=function(n){if(j[n]){return j[n]}var o=n;while(e.HYPHEN.exec(o)){o=o.replace(RegExp.$1,RegExp.$1.substr(1).toUpperCase())}j[n]=o;return o};if(document.defaultView&&document.defaultView.getComputedStyle){k=function(n,q){var p=null;if(q=="float"){q="cssFloat"}var o=document.defaultView.getComputedStyle(n,"");if(o){p=o[l(q)]}return n.style[q]||p}}else{if(document.documentElement.currentStyle&&f){k=function(n,p){switch(l(p)){case"opacity":var r=100;try{r=n.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(q){try{r=n.filters("alpha").opacity}catch(q){}}return r/100;break;case"float":p="styleFloat";default:var o=n.currentStyle?n.currentStyle[p]:null;return(n.style[p]||o)}}}else{k=function(n,o){return n.style[o]}}}if(f){h=function(n,o,p){switch(o){case"opacity":if(Baidu.lang.isString(n.style.filter)){n.style.filter="alpha(opacity="+p*100+")";if(!n.currentStyle||!n.currentStyle.hasLayout){n.style.zoom=1}}break;case"float":o="styleFloat";default:n.style[o]=p}}}else{h=function(n,o,p){if(o=="float"){o="cssFloat"}n.style[o]=p}}Baidu.util.Dom={get:function(p){if(Baidu.lang.isString(p)){return document.getElementById(p)}if(Baidu.lang.isArray(p)){var q=[];for(var o=0,n=p.length;o<n;++o){q[q.length]=c.Dom.get(p[o])}return q}if(p){return p}return null},getStyle:function(n,p){p=l(p);var o=function(q){return k(q,p)};return c.Dom.batch(n,o,c.Dom,true)},setStyle:function(n,p,q){p=l(p);var o=function(r){h(r,p,q)};c.Dom.batch(n,o,c.Dom,true)},getXY:function(n){var o=function(r){if((r.parentNode===null||r.offsetParent===null||this.getStyle(r,"display")=="none")&&r!=document.body){return false}var q=null;var p=[];var s;if(r.getBoundingClientRect){s=r.getBoundingClientRect();var u=document;if(!this.inDocument(r)&&parent.document!=document){u=parent.document;if(!this.isAncestor(u.documentElement,r)){return false}}var t=Math.max(u.documentElement.scrollTop,u.body.scrollTop);var v=Math.max(u.documentElement.scrollLeft,u.body.scrollLeft);return[s.left+v,s.top+t]}else{p=[r.offsetLeft,r.offsetTop];q=r.offsetParent;var w=this.getStyle(r,"position")=="absolute";if(q!=r){while(q){p[0]+=q.offsetLeft;p[1]+=q.offsetTop;if(m&&!w&&this.getStyle(q,"position")=="absolute"){w=true}q=q.offsetParent}}if(m&&w){p[0]-=document.body.offsetLeft;p[1]-=document.body.offsetTop}}q=r.parentNode;while(q.tagName&&!e.ROOT_TAG.test(q.tagName)){if(c.Dom.getStyle(q,"display")!="inline"){p[0]-=q.scrollLeft;p[1]-=q.scrollTop}q=q.parentNode}return p};return c.Dom.batch(n,o,c.Dom,true)},setXY:function(o,n,q){var p=function(t){var s=this.getStyle(t,"position");if(s=="static"){this.setStyle(t,"position","relative");s="relative"}var v=this.getXY(t);if(v===false){return false}var u=[parseInt(this.getStyle(t,"left"),10),parseInt(this.getStyle(t,"top"),10)];if(isNaN(u[0])){u[0]=(s=="relative")?0:t.offsetLeft}if(isNaN(u[1])){u[1]=(s=="relative")?0:t.offsetTop}if(n[0]!==null){t.style.left=n[0]+"px"}if(n[1]!==null){t.style.top=n[1]+"px"}if(!q){var r=this.getXY(t);if((n[0]!==null&&r[0]!=n[0])||(n[1]!==null&&r[1]!=n[1])){this.setXY(t,n,true)}}};c.Dom.batch(o,p,c.Dom,true)},getElementsByClassName:function(p,n,o){var q=function(r){return c.Dom.hasClass(r,p)};return c.Dom.getElementsBy(q,n,o)},hasClass:function(p,o){var n=new RegExp("(?:^|\\s+)"+o+"(?:\\s+|$)");var q=function(r){return n.test(r.className)};return c.Dom.batch(p,q,c.Dom,true)},addClass:function(o,n){var p=function(q){if(this.hasClass(q,n)){return}q.className=[q.className,n].join(" ")};c.Dom.batch(o,p,c.Dom,true)},deleteClass:function(p,o){var n=new RegExp("(?:^|\\s+)"+o+"(?:\\s+|$)","g");var q=function(r){if(!this.hasClass(r,o)){return}var s=r.className;r.className=s.replace(n," ");if(this.hasClass(r,o)){this.deleteClass(r,o)}};c.Dom.batch(p,q,c.Dom,true)},isAncestor:function(o,p){o=c.Dom.get(o);if(!o||!p){return false}var n=function(r){if(o.contains&&!m){return o.contains(r)}else{if(o.compareDocumentPosition){return !!(o.compareDocumentPosition(r)&16)}else{var q=r.parentNode;while(q){if(q==o){return true}else{if(!q.tagName||q.tagName.toUpperCase()=="HTML"){return false}}q=q.parentNode}return false}}};return c.Dom.batch(p,n,c.Dom,true)},inDocument:function(n){var o=function(p){return this.isAncestor(document.documentElement,p)};return c.Dom.batch(n,o,c.Dom,true)},getElementsBy:function(t,o,p){o=o||"*";var q=[];if(p){p=c.Dom.get(p);if(!p){return q}}else{p=document}var s=p.getElementsByTagName(o);if(!s.length&&(o=="*"&&p.all)){s=p.all}for(var r=0,n=s.length;r<n;++r){if(t(s[r])){q[q.length]=s[r]}}return q},batch:function(s,n,r,q){var p=s;s=c.Dom.get(s);var w=(q)?r:window;if(!s||s.tagName||!s.length){if(!s){return false}return n.call(w,s,r)}var u=[];for(var t=0,v=s.length;t<v;++t){if(!s[t]){p=s[t]}u[u.length]=n.call(w,s[t],r)}return u}}})();Baidu.util.CustomEvent=function(d,b,c,a){this.type=d;this.scope=b||window;this.silent=c;this.signature=a||Baidu.util.CustomEvent.LIST;this.subscribers=[];if(!this.silent){}var e="_BDOnSubc";if(d!==e){this.subscribeEvent=new Baidu.util.CustomEvent(e,this,true)}};Baidu.util.CustomEvent.LIST=0;Baidu.util.CustomEvent.FLAT=1;Baidu.util.CustomEvent.prototype={subscribe:function(b,c,a){if(!b){throw new Error("Invalid callback for subscriber to '"+this.type+"'")}if(this.subscribeEvent){this.subscribeEvent.fire(b,c,a)}this.subscribers.push(new Baidu.util.Subscriber(b,c,a))},fire:function(){var a=this.subscribers.length;if(!a&&this.silent){return true}var c=[],b=true,d;for(d=0;d<arguments.length;++d){c.push(arguments[d])}var g=c.length;if(!this.silent){}for(d=0;d<a;++d){var f=this.subscribers[d];if(f){if(!this.silent){}var e=f.getScope(this.scope);if(this.signature==Baidu.util.CustomEvent.FLAT){var h=null;if(c.length>0){h=c[0]}b=f.fn.call(e,h,f.obj)}else{b=f.fn.call(e,this.type,c,f.obj)}if(false===b){if(!this.silent){}return false}}}return true}};Baidu.util.Subscriber=function(b,c,a){this.fn=b;this.obj=c||null;this.override=a};Baidu.util.Subscriber.prototype.getScope=function(a){if(this.override){if(this.override===true){return this.obj}else{return this.override}}return a};Baidu.util.Subscriber.prototype.contains=function(a,b){if(b){return(this.fn==a&&this.obj==b)}else{return(this.fn==a)}};if(!Baidu.util.Event){Baidu.util.Event=function(){var a=[];var c=[];var b=null;return{POLL_RETRYS:200,POLL_INTERVAL:10,EL:0,TYPE:1,FN:2,WFN:3,OBJ:3,ADJ_SCOPE:4,isSafari:(/KHTML/gi).test(navigator.userAgent),webkit:function(){var d=navigator.userAgent.match(/AppleWebKit\/([^ ]*)/);if(d&&d[1]){return d[1]}return null}(),isIE:(!this.webkit&&!navigator.userAgent.match(/opera/gi)&&navigator.userAgent.match(/msie/gi)),addListener:function(f,d,o,j,e){if(!o||!o.call){return false}if(this._isValidCollection(f)){var p=true;for(var k=0,m=f.length;k<m;++k){p=this.on(f[k],d,o,j,e)&&p}return p}else{if(typeof f=="string"){var h=this.getEl(f);if(h){f=h}else{this.onAvailable(f,function(){Baidu.util.Event.on(f,d,o,j,e)});return true}}}if(!f){return false}if("unload"==d&&j!==this){c[c.length]=[f,d,o,j,e];return true}var r=f;if(e){if(e===true){r=j}else{r=e}}var g=function(s){return o.call(r,Baidu.util.Event.getEvent(s),j)};var q=[f,d,o,g,r];var l=a.length;a[l]=q;try{this._simpleAdd(f,d,g,false)}catch(n){this.lastError=n;this.removeListener(f,d,o);return false}return true},removeListener:function(e,d,l){var f,j;if(typeof e=="string"){e=this.getEl(e)}else{if(this._isValidCollection(e)){var m=true;for(f=0,j=e.length;f<j;++f){m=(this.removeListener(e[f],d,l)&&m)}return m}}if(!l||!l.call){return this.purgeElement(e,false,d)}if("unload"==d){for(f=0,j=c.length;f<j;f++){var n=c[f];if(n&&n[0]==e&&n[1]==d&&n[2]==l){c.splice(f,1);return true}}return false}var g=null;var h=arguments[3];if("undefined"==typeof h){h=this._getCacheIndex(e,d,l)}if(h>=0){g=a[h]}if(!e||!g){return false}try{this._simpleRemove(e,d,g[this.WFN],false)}catch(k){this.lastError=k;return false}delete a[h][this.WFN];delete a[h][this.FN];a.splice(h,1);return true},getTarget:function(f,e){var d=f.target||f.srcElement;return this.resolveTextNode(d)},resolveTextNode:function(d){if(d&&3==d.nodeType){return d.parentNode}else{return d}},getPageX:function(e){var d=e.pageX;if(!d&&0!==d){d=e.clientX||0;if(this.isIE){d+=this._getScrollLeft()}}return d},getPageY:function(d){var e=d.pageY;if(!e&&0!==e){e=d.clientY||0;if(this.isIE){e+=this._getScrollTop()}}return e},getXY:function(d){return[this.getPageX(d),this.getPageY(d)]},stopEvent:function(d){this.stopPropagation(d);this.preventDefault(d)},stopPropagation:function(d){if(d.stopPropagation){d.stopPropagation()}else{d.cancelBubble=true}},preventDefault:function(d){if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}},getEvent:function(f){var d=f||window.event;if(!d){var g=this.getEvent.caller;while(g){d=g.arguments[0];if(d&&Event==d.constructor){break}g=g.caller}}return d},_getCacheIndex:function(h,j,g){for(var f=0,e=a.length;f<e;++f){var d=a[f];if(d&&d[this.FN]==g&&d[this.EL]==h&&d[this.TYPE]==j){return f}}return -1},_isValidCollection:function(d){return(d&&d.length&&typeof d!="string"&&!d.tagName&&!d.alert&&typeof d[0]!="undefined")},getEl:function(d){return document.getElementById(d)},purgeElement:function(g,h,k){var j=this.getListeners(g,k);if(j){for(var f=0,d=j.length;f<d;++f){var e=j[f];this.removeListener(g,e.type,e.fn)}}if(h&&g&&g.childNodes){for(f=0,d=g.childNodes.length;f<d;++f){this.purgeElement(g.childNodes[f],h,k)}}},getListeners:function(f,d){var k=[],e;if(!d){e=[a,c]}else{if(d=="unload"){e=[c]}else{e=[a]}}for(var h=0;h<e.length;++h){var o=e[h];if(o&&o.length>0){for(var m=0,n=o.length;m<n;++m){var g=o[m];if(g&&g[this.EL]===f&&(!d||d===g[this.TYPE])){k.push({type:g[this.TYPE],fn:g[this.FN],obj:g[this.OBJ],adjust:g[this.ADJ_SCOPE],index:m})}}}}return(k.length)?k:null},_getScrollLeft:function(){return this._getScroll()[1]},_getScrollTop:function(){return this._getScroll()[0]},_getScroll:function(){var d=document.documentElement,e=document.body;if(d&&(d.scrollTop||d.scrollLeft)){return[d.scrollTop,d.scrollLeft]}else{if(e){return[e.scrollTop,e.scrollLeft]}else{return[0,0]}}},_simpleAdd:function(){if(window.addEventListener){return function(f,g,e,d){f.addEventListener(g,e,(d))}}else{if(window.attachEvent){return function(f,g,e,d){f.attachEvent("on"+g,e)}}else{return function(){}}}}(),_simpleRemove:function(){if(window.removeEventListener){return function(f,g,e,d){f.removeEventListener(g,e,(d))}}else{if(window.detachEvent){return function(e,f,d){e.detachEvent("on"+f,d)}}else{return function(){}}}}()}}()}if(typeof(Baidu.Finance)=="undefined"||typeof(Baidu.Finance.Refresh)=="undefined"){Baidu.namespace("Baidu.Finance.Refresh")}var dm=document.domain.split("."),ttdm=dm[dm.length-2]+"."+dm[dm.length-1],BFR=Baidu.Finance.Refresh;BFR.init=function(){BFR.params.init();BFR.frontend.init();BFR.events.init();BFR.vcr.init()};BFR.DataCache=function(){var a={};this.put=function(b,d,c){if(!a[b]){a[b]={}}a[b][d]=c};this.get=function(b,d){var c=null;if(a[b]){c=a[b][d]}return c}};BFR.D_IFrame=function(d){var b=null,a=null,e=(d)?d:"RSIFrame",c=function(){if(!document.createElement){return true}if(!b&&document.createElement){try{var g=document.createElement("iframe");g.setAttribute("id",e);g.style.border="0px";g.style.width="0px";g.style.height="0px";b=document.body.appendChild(g);if(document.frames){b=document.frames[e]}}catch(f){iframeHTML='<iframe id="'+e+'" style="';iframeHTML+="border:0px;";iframeHTML+="width:0px;";iframeHTML+="height:0px;";iframeHTML+="display:none;";iframeHTML+="hidden:true;";iframeHTML+='"></iframe>';document.body.innerHTML+=iframeHTML;b=new Object();b.document=new Object();b.document.location=new Object();b.document.location.iframe=BFR.util.$(e);b.document.location.replace=function(j){this.iframe.src=j}}}if(navigator.userAgent.indexOf("Gecko")!=-1&&!b.contentDocument){setTimeout("createIFrame()",10);return false}try{if(b.contentDocument){a=b.contentDocument}else{if(b.contentWindow){a=b.contentWindow.document}else{if(b.document){a=b.document}else{return true}}}}catch(h){return false}return false};this.loadURL=function(h,f){if(f){document.domain=f}try{a.location.replace(h)}catch(g){try{b.location.replace(h)}catch(j){}}return false};this.destroyScriptTags=function(){if(!b){return}var g=b.contentDocument;if(!g){g=b.document}if(g){var j=g.getElementsByTagName("script"),h=j.length,f=null;for(i=0;i<h;i++){f=j[0];f.parentNode.removeChild(f);delete (f)}}};c()};BFR.events={hasFocus:true,hasActivity_snz:false,scount_snz:0,nowtime:"",isSnoozing:false,isRefreshing:true,isClose:false,IERecentFocusFlag:false,ignoreFakeMouseMoveCheck:false,snzTimer:null,adsTimer:null,serveAdsTimer:null,_ns:(navigator.appName.indexOf("Netscape")!=-1),_mouseX:0,_mouseY:0,SNOOZE_CHK_INTVL:10*60,SNOOZE_CHK_SLICE:10,init:function(){this._initEvtHandlers();this.snzStatusCheck(this.SNOOZE_CHK_INTVL,this.SNOOZE_CHK_SLICE)},_initEvtHandlers:function(){Baidu.util.Event.addListener(document,"keydown",function(a){BFR.events.handleKeyEvt(a)});Baidu.util.Event.addListener(window,"focus",function(a){BFR.events.handleFocus(a)});Baidu.util.Event.addListener(window,"error",function(a){BFR.events.handleError(a)});Baidu.util.Event.addListener(window,"blur",function(a){BFR.events.handleFocus(a)});Baidu.util.Event.addListener(document,"mousemove",function(a){BFR.events.handleMouseEvt(a)});Baidu.util.Event.addListener(document,"click",function(a){BFR.events.handleMouseEvt(a)})},notify:function(a){if(a=="Refresh_NO"){this.isRefreshing=false}else{if(a=="Refresh_YES"){this.isRefreshing=true;this.snzStatusCheck(this.SNOOZE_CHK_INTVL,this.SNOOZE_CHK_SLICE)}}},handleFocus:function(a){var c=(a.type=="focus")?true:false;if(c&&!this._ns){this.IERecentFocusFlag=true;setTimeout(function(){BFR.events.IERecentFocusFlag=false},100)}if(c!=this.hasFocus){if(!c&&!this._ns){var b=Baidu.util.Event;if(this._pointerInsideIEBrowser(b.getPageX(a),b.getPageY(a))){c=true}else{if(this.IERecentFocusFlag){c=true}}}this.hasFocus=c;this.hasActivity_snz=true}},_pointerInsideIEBrowser:function(a,b){var c=document.body;if(a<c.scrollLeft+c.clientWidth&&b<c.scrollTop+c.clientHeight){return true}return false},handleMouseEvt:function(b){if(this.ignoreFakeMouseMoveCheck===false){var c=Baidu.util.Event.getPageX(b),a=Baidu.util.Event.getPageY(b);if(c==this._mouseX&&a==this._mouseY){return}this._mouseX=c;this._mouseY=a}this.hasActivity_snz=true},handleKeyEvt:function(b){this.hasActivity_snz=true;var a=b.keyCode;if(a==27){Baidu.util.Event.stopEvent(b)}},snzStatusCheck:function(b,e){if(this.snzTimer){clearTimeout(this.snzTimer)}var d=0,a=this.timejudgement();if(a[0]||a[1]){if((!BFR.params.rf_params.r||BFR.params.rf_params.r!="1")){d=1;this.isClose=true;BFR.vcr.setReS(a[0],a[1])}}if(this.isClose&&d==0){this.isSnoozing=true;this.isClose=false}if(!this.isRefreshing&&!this.isSnoozing){return}var c=Math.floor(b/e);if(d==0){if(this.hasFocus&&this.hasActivity_snz){this.scount_snz=0;if(this.isSnoozing){this.isSnoozing=false;BFR.frontend.RefreshManager({stop:false});return}}else{if(!this.isSnoozing){this.scount_snz++;if(this.scount_snz==c*2){this.scount_snz=0;BFR.frontend.RefreshManager({stop:true});this.isSnoozing=true}}}this.hasActivity_snz=false}this.snzTimer=setTimeout(function(){BFR.events.snzStatusCheck(b,e)},1000*e/2)},timejudgement:function(){var b=this.nowtime,c=b.substring(11,b.length).split(":"),e=parseFloat(c[0]),a=parseFloat(c[1]),d={};if(e<9||(e==9&&a<30)){d[0]=true}else{if(e>15||(e==15&&a>1)){d[0]=true}else{d[0]=false}}if(e<10){d[1]=true}else{if(e>16||(e==16&&a>2)){d[1]=true}else{d[1]=false}}return d},handleError:function(a){return true}};BFR.params=function(){return{rf_params:{arrowAsChangeSign:true,throttleInterval:"500",STREAMER_SERVER:"http://baidu.hexun.com/stock/q4fn.php"},init:function(){if(BFR.util.$("bdfn_para_autor")){this.initialParams(this.rf_params,"bdfn_para_autor")}},initialParams:function(para,anchor,appender){var elem=anchor;if(typeof anchor==="string"){elem=BFR.util.$(anchor)}if(!elem){return}var p=eval("("+elem.innerHTML+")");for(var key in p){if(appender&&appender.append===true){if(typeof para[key]==="undefined"||!para[key]){para[key]=p[key]}else{if(!BFR.util.isEmpty(p[key])){para[key]+=p[key]}}}else{para[key]=p[key]}}}}}();BFR.vcr={fx168:"",isFirst:0,loopnum:0,url:null,url2:null,params:null,tempdata:"",sh_push:false,bfn_rf_iframe:null,_evtListeners:[],domain:(ttdm=="hexun.com"?"hexun.com":"baidu.com"),stopRe:false,stopReHK:false,init:function(){this.params=BFR.params.rf_params;if(this.getzjfwtoPara()){var b=this.tempdata.split(","),c="",a="";for(i=0;i<b.length;i++){if(b[i].substr(b[i].indexOf("."),3)==".hk"){c+=","+b[i]}else{a+=","+b[i]}}this.params.s1+=c;this.params.s2+=a}this.stophandler=new BFR.vcr.stophandler({bufs:[new BFR.vcr.ThrottleBuffer(0),new BFR.vcr.ThrottleBuffer(1)],intvl:parseInt(BFR.params.rf_params.throttleInterval)});this.fx168=this.params.fx_server;this._addEventListener(BFR.events);this._addEventListener(BFR.markettime);this._addEventListener(this.stophandler);BFR.frontend.RefreshManager({stop:BFR.util.cookieMgr.existsInCookie("PRF","sq=0")})},getzjfwtoPara:function(){var a=1,b=new BFR.util.ElementHash("span","id","temp_para");while(elem=b.getElemForUniqueAttr(uid="temp_para_"+a++)){this.tempdata+=elem.innerHTML}return true},updatedata:function(a){BFR.frontend.updateOneTicker(a)},updateMarkettime:function(a){BFR.frontend.updateMarkettime(a)},setReS:function(a,b){this.stopRe=a;this.stopReHK=b;return a},_addEventListener:function(a){if(a){this._evtListeners.push(a)}},_notifyListeners:function(a){for(var b in this._evtListeners){var c=this._evtListeners[b];if(c.notify){c.notify(a)}}},startRefresh:function(){var a=this.params.start?this.params.start*1000:0;this.sh_push=false;this.stopRe=false;this.stopReHK=false;if(BFR.vcr.isFirst==0){setTimeout(function(){BFR.vcr.load(BFR.vcr.fx168,BFR.vcr.isFirst==0?false:true)},a)}else{BFR.vcr.load(BFR.vcr.fx168,BFR.vcr.isFirst==0?false:true)}this._notifyListeners("Refresh_YES")},load:function(b,a){this.loopnum=0;var c=this.params.load_intev?this.params.load_intev*1000:30000;if(this.stopRe==false){url=this.makeRequestUrl("st");if(url){if(!this.bfn_rf_iframe){this.bfn_rf_iframe=new BFR.D_IFrame("df1")}this.bfn_rf_iframe.loadURL(url,this.domain)}url2=this.makeRequestUrl("gegu");if(url2){if(!this.bfn_rf_iframe2){this.bfn_rf_iframe2=new BFR.D_IFrame("df2")}this.bfn_rf_iframe2.loadURL(url2,this.domain)}}else{if(this.stopReHK==false){url2=this.makeRequestUrl("hk");if(url2){if(!this.bfn_rf_iframe2){this.bfn_rf_iframe2=new BFR.D_IFrame("df2")}this.bfn_rf_iframe2.loadURL(url2,this.domain)}}}if(b){url3=this.makeRequestUrl("fx");if(url3){if(!this.bfn_rf_iframe3){this.bfn_rf_iframe3=new BFR.D_IFrame("df3")}this.bfn_rf_iframe3.loadURL(url3,this.domain)}}if(!a){setTimeout(function(){BFR.vcr.load(b,a)},c)}},makeRequestUrl:function(b){reqUrl_prefix=this.params.bdfn_server;if(ttdm=="hexun.com"){reqUrl_prefix="http://bdcjhq.hexun.com/quote"}else{reqUrl_prefix="http://cjhq.baidu.com/quote"}switch(b){case"st":var c=reqUrl_prefix+"?s2="+this.params.s2;if(this.params.s1&&this.stopReHK==false){c+=","+this.params.s1}if(this.params.s3){var d=this.params.s3;d=d.replace(/(^\s*)/g,"");c+=","+d}break;case"fx":reqUrl_prefix=this.params.fx_server;var a=BFR.util.getCurrTimeStamp(),c=reqUrl_prefix+"?"+a;this.stamp=(this.stamp+1)%1000;return c;break;case"hk":if(this.params.s1){c=reqUrl_prefix+"?s2="+this.params.s1}else{return null}break;case"gegu":if(this.params.s4){c=reqUrl_prefix+"?s1="+this.params.s4}else{return null}break;default:break}c=c.replace(/,,+/g,",");return c},stopRefresh:function(){this.sh_push=true;BFR.vcr.setReS(true,true);this._notifyListeners("Refresh_NO")},isRefreshing:function(){return(!this.sh_push)},pushFrameCount:0,updateOneFrame:function(b){window.status="Done";this.stophandler.startThrottleIfStopped();for(var a in b){b[a].ticker=a;this.stophandler.getCurrBuf().add(a,b[a])}if(this.pushFrameCount++>=1000){this.bfn_rf_iframe.destroyScriptTags();this.pushFrameCount=0}}};BFR.vcr.stophandler=function(f){var g=f.bufs,e=0,c=null,b=(f.intvl)?f.intvl:500;this.getCurrBuf=function(){return g[e]};var h=function(){return g[(e+1)%2]},j=function(){e=(e+1)%2},d=function(){var k=h();k.sendToDisplay()};this.startThrottleIfStopped=function(){if(c){return}this.startThrottle()};this.startThrottle=function(){if(c){clearInterval(c)}c=setInterval(function(){if(g[e].size()>0){j();d()}else{a()}},b)};this.stopThrottle=function(){if(c){clearInterval(c);c=null}};var a=this.stopThrottle;this.notify=function(k){if(k=="Refresh_NO"){this.stopThrottle()}else{if(k=="Refresh_YES"){this.startThrottle()}}}};BFR.vcr.ThrottleBuffer=function(f){var c=f,e=0,b={},d=[],a;this.add=function(g,j){if(!b[g]){e++;b[g]={}}for(var h in j){b[g][h]=j[h]}};this.size=function(){return e};this.sendToDisplay=function(){var g=0,j=1,h=1;if(BFR.vcr.isFirst==0){for(var k in b){BFR.frontend.updateOneTicker(b[k]);delete (b[k]);e--;BFR.vcr.isFirst=1}}else{if(BFR.vcr.isFirst==1){for(k in b){d[j]=b[k];setTimeout(function(){BFR.vcr.updatedata(d[h]);h++},g);g=(g+1000)%10000;delete (b[k]);e--;j++}}}if(d[1]){BFR.vcr.updateMarkettime(d[1]["time"])}}};bdcallback=function(a){BFR.vcr.updateOneFrame(a)};BFR.frontend={Arrow_up:"<img src='img/up.gif' alt='+'>",Arrow_down:"<img src='img/down.gif' alt='-'>",UP_CLASS:"upRed",DOWN_CLASS:"downGreen",CHG_UP_CLASS:"upRedArrow",CHG_DOWN_CLASS:"downGreenArrow",flashingDatums:"vo,tu,la,zde,zdf,zj,rate,earn,val2,val3,val5,val6,val7,val8",dCache:null,elemHash:null,switches:["bfn_onoff"],init:function(){this.dCache=new BFR.DataCache();this.elemHash=new BFR.util.ElementHash("span","id","bfn_");for(var b in this.switches){var a=BFR.util.$(this.switches[b]);if(a&&a.style){a.style.display=""}}},updateOneTicker:function(g){var o=g.ticker,n=0;o=o.toLowerCase();for(var e in g){if(g.is&&parseInt(g.is)>0){if(parseInt(g.is)==1){var l=g.time,r=l.substring(11,l.length).split(":"),k=parseFloat(r[0]),j=parseFloat(r[1]);if(k<10||(k==10&&j<30)){continue}}else{continue}}var q=g[e];if(!q){continue}switch(e){case"ticker":break;case"hi":case"lo":case"op":if(parseFloat(g[e])==parseFloat(g.pc)){UorD=0}else{if(parseFloat(g[e])>parseFloat(g.pc)){UorD=1}else{UorD=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",UorD);break;case"sz":case"vo":case"pc":case"sy":if(parseFloat(q)>0){this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"asIs",g.la,true,"st")}else{this.updateElem(o,e,"-","asIs",g.la,true,"st")}break;case"bp1":case"bv1":if(parseFloat(g.bp1)>parseFloat(g.pc)){BorA=1}else{if(g.bp1==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"bp2":case"bv2":if(parseFloat(g.bp2)>parseFloat(g.pc)){BorA=1}else{if(g.bp2==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"bp3":case"bv3":if(parseFloat(g.bp3)>parseFloat(g.pc)){BorA=1}else{if(g.bp3==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"bp4":case"bv4":if(parseFloat(g.bp4)>parseFloat(g.pc)){BorA=1}else{if(g.bp4==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"bp5":case"bv5":if(parseFloat(g.bp5)>parseFloat(g.pc)){BorA=1}else{if(g.bp5==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"ap1":case"av1":if(parseFloat(g.ap1)>parseFloat(g.pc)){BorA=1}else{if(g.ap1==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"ap2":case"av2":if(parseFloat(g.ap2)>parseFloat(g.pc)){BorA=1}else{if(g.ap2==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"ap3":case"av3":if(parseFloat(g.ap3)>parseFloat(g.pc)){BorA=1}else{if(g.ap3==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"ap4":case"av4":if(parseFloat(g.ap4)>parseFloat(g.pc)){BorA=1}else{if(g.ap4==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"ap5":case"av5":if(parseFloat(g.ap5)>parseFloat(g.pc)){BorA=1}else{if(g.ap5==g.pc){BorA=0}else{BorA=-1}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",BorA);break;case"wb":case"wbc":case"lt":case"na":this.updateElem(o,e,q,"asIs",g.la,true,"st");break;case"tu":var d=parseInt(parseFloat(g.tu)*10000/parseFloat(g.vo))/100;d=d?d.toString():"-";if(parseInt(g.type)==1){var f=Math.round(parseFloat(g.tu)/10)/1000;this.updateElem(o,e,f.toString(),"asIs",g.la,true,"st")}else{this.updateElem(o,e,q,"asIs",g.la,true,"st")}this.updateElem(o,"zj",d.toString(),"asIs",g.la,true,"st");break;case"zde":if(parseFloat(g.la)==0){this.updateElem(o,e,"-","asIs",g.la,true,"st")}else{this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"arrowColorAbs",g.la,true,"st",{nodecimalformat:true})}break;case"zdf":if(parseFloat(g.la)==0){this.updateElem(o,e,"-","asIs",g.la,true,"st")}else{this.updateElem(o,e,q,"arrowColorAbsPercent",g.la,true,"st")}break;case"hs":this.updateElem(o,e,q,"parensAbsPercent",g.la,true,"st");break;case"is":break;case"time":this.updateElem(o,e,q,"asIs",g.la,true,"st");BFR.events.nowtime=g[e];break;case"val9":this.updateElem(o,e,q,"asIs",g.la,true,"st");break;case"la":if(parseFloat(g.la)>parseFloat(g.pc)){UorD=1}else{if(parseFloat(g.la)==parseFloat(g.pc)){UorD=0}else{UorD=-1}}if(BFR.util.$("paidprice_"+o)){var p=BFR.util.$("paidprice_"+o).value,h=BFR.util.$("paidnumber_"+o).value,b=parseInt(((g.la-p)-(g.la*0.001+g.la*0.002)-(p*0.001+p*0.002))/p*10000+0.5)/100,s=parseInt(h*b*p)/100;if(b&&parseFloat(b)!=0){this.updateElem(o,"rate",this.formatNumber(b.toString(),2,true),"arrowColorAbsPercent",g.la,true,"st")}else{this.updateElem(o,"rate","-","asIs",0,true,"ind")}this.updateElem(o,"earn",this.formatNumber(this.formatNumberInsertCommasDots(s,true),2,true),"valueColor",g.la,true,"st",b)}if(!g.zde){if((parseFloat(g.op)!=0)&&(g.op!="-")&&(g.op!="")){var m=parseFloat(g.la)-parseFloat(g.pc),c=m/parseFloat(g.pc);c=Math.round(c*10000)/10000*100;var a=parseInt(g.type)==2?2:3;if(BFR.params.rf_params.type=="index"){a=2}this.updateElem(o,"zde",this.formatNumber(this.formatNumberInsertCommasDots(m,true),a,true),"arrowColorAbs",g.la,true,"st",{nodecimalformat:true});this.updateElem(o,"zdf",this.formatNumber(c,2,true),"arrowColorAbsPercent",g.la,true,"st")}else{this.updateElem(o,"zde","-","asIs",0,true,"ind");this.updateElem(o,"zdf","-","asIs",0,true,"ind")}}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",g.la,true,"st",UorD);this.updateMap(o,g.time,g.type);break;case"val1":case"val4":case"val7":case"val8":this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"asIs",q,false,"re");break;case"val6":if(parseFloat(g.val1)==0){this.updateElem(o,e,"-","asIs",0,true,"ind")}else{this.updateElem(o,e,q,"arrowColorAbs",0,true,"ind",{nodecimalformat:true},0,true,"ind")}break;case"val2":case"val3":case"val5":if(parseFloat(g[e])==parseFloat(g.val4)){this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"asIs",0,true,"ind")}else{if(parseFloat(g[e])>parseFloat(g.val4)){UorD=1}else{UorD=-1}this.updateElem(o,e,this.formatNumberInsertCommasDots(q,true),"valueColor",0,true,"ind",UorD)}break}}},updateMarkettime:function(a){if(BFR.util.$("markettime")){BFR.util.$("markettime").innerHTML=a}},updateMap:function(a,f,b){a=a.toLowerCase();if(BFR.util.$("rtmap_"+a)){var c=BFR.util.getCurrTimeStamp(),d="",e=a.indexOf(".");if(BFR.params.rf_params.type=="index"){if(a=="hsi001.hk"){d="http://bdchart.hexun.com/stock/chart/hki/90001.png?"+c}else{if(a=="cci001.hk"){d="http://bdchart.hexun.com/stock/chart/hki/90006.png?"+c}else{if(a=="cei001.hk"){d="http://bdchart.hexun.com/stock/chart/hki/90007.png?"+c}else{d="http://bdchart.hexun.com/stock/chart/index/index_1_"+a.substr(0,e).toUpperCase()+".png?"+c}}}}else{if(BFR.params.rf_params.type=="gegu"){if(a.indexOf("hk")>-1){if(parseInt(b)==1){d="http://bdchart.hexun.com/hkstock/chart/bf/1/"+a.substr(0,e).toUpperCase()+".png?"+c}else{d="http://bdchart.hexun.com/hkstock/chart/bf/0/"+a.substr(0,e).toUpperCase()+".png?"+c}}else{if(a.indexOf("sh")>-1){d="http://bdchart.hexun.com/stock/chart/bf/0/"+a.substr(0,e).toUpperCase()+".png?"+c}else{d="http://bdchart.hexun.com/stock/chart/bf/1/"+a.substr(0,e).toUpperCase()+".png?"+c}}}}if(d!=""){BFR.util.$("rtmap_"+a).src=d}}},updateElem:function(d,h,e,q,p,f,a,j){var n,g=1,c="bfn_"+h+"_"+d,m="";switch(a){case"re":var l=this.dCache.get(d,"val4");break;case"ind":l=this.dCache.get(d,h);p=e;break;default:l=this.dCache.get(d,"la");break}var o=this.dCache.get(d,h);while((n=this.elemHash.getElemForUniqueAttr(m=c+"_"+g++))){if(Baidu.util.Dom.hasClass(n,"refresh-inactive")){return true}var k=this.renderFuncLib[q],b="";if(e==null||BFR.util.isInvalidNumber(e)){b="-"}else{if(e.toLowerCase()=="n/a"){b="N/A"}else{b=k?k(e,j):e}}n.innerHTML=b;if(this.flashingDatums.indexOf(h.substring(0,3))!=-1&&(f||(o!=e))){this.highlightValueChange(m,l,p)}}this.dCache.put(d,h,e)},onUP_Chg_COLOR:"onChangeRed",onDOWN_Chg_COLOR:"onChangeGreen",HIGHLIGHT_INTVL:500,highlightValueChange:function(a,e,b){if(e==null||b==null||e==b){return}var c=this.elemHash.getElemForUniqueAttr(a);e=parseFloat(e.toString().replace(/,/g,""));b=parseFloat(b.toString().replace(/,/g,""));if(isNaN(e)||isNaN(b)||b=="-"||b=="-%"||e==b){return}var d=(b>e)?this.onUP_Chg_COLOR:this.onDOWN_Chg_COLOR;BFR.webfx.highlightBG({el:c,id:a,hlclass:d,intvl:this.HIGHLIGHT_INTVL})},isZero:function(a){if(parseFloat(a)==0){a="-"}return a},renderFuncLib:{BeRed:function(a){a=BFR.frontend.isZero(a);ret='<span class="'+BFR.frontend.UP_CLASS+'">'+a+"</span>";return ret},BeGreen:function(a){a=BFR.frontend.isZero(a);ret='<span class="'+BFR.frontend.DOWN_CLASS+'">'+a+"</span>";return ret},valueColor:function(c,a){c=BFR.frontend.isZero(c);var b="";if(a>0){b='<span class="'+BFR.frontend.UP_CLASS+'">'+c+"</span>";return b}else{if(a<0){b='<span class="'+BFR.frontend.DOWN_CLASS+'">'+c+"</span>";return b}else{return c}}},asIs:function(a){a=BFR.frontend.isZero(a);return a},arrowColorAbs:function(c,d){var e=BFR.frontend.getChangeIcon(c),b=BFR.frontend.signMap[BFR.frontend.getSign(c)],a="";if(BFR.params.rf_params.arrowAsChangeSign){a='<span class="'+BFR.frontend.getChangeColorArrowClass(c)+'">'+BFR.frontend.getAbs(c)+"</span>"}else{a='<span class="'+BFR.frontend.getChangeColorArrowClass(c)+'">'+b+BFR.frontend.getAbs(c)+"</span>"}return a},arrowColorAbsPercent:function(c){var d=BFR.frontend.getChangeIcon(c),b=BFR.frontend.signMap[BFR.frontend.getSign(c)],a="";if(BFR.params.rf_params.arrowAsChangeSign){a=' <span class="'+BFR.frontend.getChangeColorArrowClass(c)+'">'+BFR.frontend.getAbs(c)+"%</span>"}else{a='<span class="'+BFR.frontend.getChangeColorClass(c)+'">'+BFR.frontend.getAbs(c)+"%</span>"}return a},parensColorAbsPercent:function(a){return'<span class="'+BFR.frontend.getChangeColorClass(a)+'">'+BFR.frontend.getAbs(a.toString())+"%</span>"},parensAbsPercent:function(b){var a=BFR.frontend.signMap[BFR.frontend.getSign(b)];b=BFR.frontend.isZero(b);return"<span>"+a+BFR.frontend.getAbs(b)+"%</span>"}},formatNumber:function(e,h,c){e=e.toString().replace(/\,/g,"");if(isNaN(e)){e=0;return"-"}var g=(e>=0);e=Math.abs(e);var k=Math.floor(e).toString(),a=h;switch(a){case 2:var d=100,j="00";break;case 3:d=1000,j="000";break;case 4:d=10000,j="0000";break}var b=Math.floor(e*d+0.5)%d;if(b<(d/10)){b=j.substring(b.toString().length)+b}for(var f=0;f<Math.floor((k.length-(f+1))/3);f++){k=k.substring(0,k.length-(4*f+3))+","+k.substring(k.length-(4*f+3))}return(((g)?"":"-")+k+((!c)?"":"."+b))},formatNumberInsertCommasDots:function(e,a){e=e.toString().replace(/\,/g,"");if(isNaN(e)){return"0"}var c=(e>=0),d=e.indexOf("."),g=Math.floor(Math.abs(e)).toString(),h="";if(d!=-1){h=e.substr(d);if(h==="."){h=""}}var f=1;for(var b=0;b<Math.floor((g.length-(b+1))/3);b++){if(f==1){g=g.substring(0,g.length-(4*b+3))+","+g.substring(g.length-(4*b+3));f++}else{g=g.substring(0,g.length-(4*b+3))+","+g.substring(g.length-(4*b+3))}}return(((c)?"":"-")+g+((!a)?"":h))},padNumber:function(b,a){b=b.toString();while(b.length<a){b="0"+b}return b},getAbs:function(b){b=b.toString();var a=b.substring(0,1);if(a=="-"||a=="+"){b=b.substring(1,b.length)}if(isNaN(b.replace(/,+/g,""))){return"-"}return b},getChangeColorClass:function(a){switch(this.getSign(a)){case -1:return this.CHG_DOWN_CLASS;case 1:return this.CHG_UP_CLASS;default:return""}},getChangeColorArrowClass:function(a){switch(this.getSign(a)){case -1:return this.CHG_DOWN_CLASS;case 1:return this.CHG_UP_CLASS;default:return""}},getChangeIcon:function(a){switch(this.getSign(a)){case -1:return this.Arrow_down;case 1:return this.Arrow_up;default:return""}},getSign:function(b){if(b==null){return 0}if(b<0){return -1}else{if(b>0){return 1}else{var a=b.toString().substring(0,1);if(a==="+"){return 1}else{if(a==="-"){return -1}else{return 0}}}}},signMap:{"-1":"-","1":"","0":""},RefreshManager:function(a){var b=BFR.util.$("bfn_onoff");if(a.stop){BFR.vcr.stopRefresh();if(b){b.innerHTML='<a class="off" href="javascript:void(0)" onclick="BFR.frontend.onoff.toggleOnoffText(\'on\'); return false;">\u6253\u5f00\u81ea\u52a8\u66f4\u65b0</a>'}if(a.setcookie){BFR.util.cookieMgr.setInCookie("PRF","sq=0")}}else{if(b){b.innerHTML='<a class="on" href="javascript:void(0)" onclick="BFR.frontend.onoff.toggleOnoffText(\'off\'); return false;">\u5173\u95ed\u81ea\u52a8\u66f4\u65b0</a>'}if(a.setcookie){BFR.util.cookieMgr.removeFromCookie("PRF","sq=0")}BFR.vcr.startRefresh()}},onoff:{toggleOnoffText:function(b,a){if(b==="on"){this.turnOn()}else{this.turnOff()}},turnOn:function(){if(!BFR.vcr.isRefreshing()){BFR.vcr.setReS(false,false);BFR.frontend.RefreshManager({stop:false,setcookie:true})}},turnOff:function(){if(BFR.vcr.isRefreshing()){BFR.vcr.setReS(true,true);BFR.frontend.RefreshManager({stop:true,setcookie:true})}}}};BFR.webfx={highlightTimerMap:{},highlightBG:function(a){if(this.highlightTimerMap[a.id]){clearTimeout(this.highlightTimerMap[a.id]);this.highlightTimerMap[a.id]=null}if(a.reset){Baidu.util.Dom.deleteClass(a.el,BFR.frontend.onUP_Chg_COLOR);Baidu.util.Dom.deleteClass(a.el,BFR.frontend.onDOWN_Chg_COLOR);return}else{Baidu.util.Dom.addClass(a.el,a.hlclass);this.highlightTimerMap[a.id]=setTimeout(function(){BFR.webfx.highlightBG({el:a.el,id:a.id,hlclass:a.hlclass,reset:true,intvl:a.intvl})},a.intvl)}}};BFR.util={$:Baidu.util.Dom.get,isEmpty:function(a){if(!a||a===""){return true}return false},getCurrTimeStamp:function(){var b=new Date(),a=b.getHours()*3600+b.getMinutes()*60+b.getSeconds()+b.getMilliseconds()/1000;return a},cookieMgr:{EXPIRES_DAYS:3650,setInCookie:function(c,b){var a=this._readCookie(c);if(!a){a=b}else{if(a.indexOf(b)==-1){a=b+"&"+a}}this._createCookie(c,a,this.EXPIRES_DAYS)},removeFromCookie:function(c,a){var d=this._readCookie(c);if(!d||d.indexOf(a)==-1){return}var b=d.indexOf(a);d=d.substring(0,b)+d.substring(b+a.length);b=d.indexOf("&&");if(b!=-1){d=d.substring(0,b)+d.substring(b+1)}if(d[d.length-1]=="&"){d=d.substring(0,d.length-1)}if(d[0]=="&"){d=d.substring(1)}this._createCookie(c,d,this.EXPIRES_DAYS)},existsInCookie:function(c,b){var a=this._readCookie(c);return(a&&a.indexOf(b)!=-1)},_readCookie:function(c){var d=c+"=",a=document.cookie.split(";");for(var b=0;b<a.length;b++){var e=a[b];while(e.charAt(0)==" "){e=e.substring(1,e.length)}if(e.indexOf(d)===0){return e.substring(d.length,e.length)}}return null},_createCookie:function(b,a,c){var d="";if(c){var e=new Date();e.setTime(e.getTime()+(c*24*60*60*1000));d="; expires="+e.toGMTString()}var f="; domain=finance.Baidu.com";document.cookie=b+"="+a+d+f+"; path=/"}},isInvalidNumber:function(a){if(typeof(a)=="number"&&(Math.abs(a)==Infinity||isNaN(a))){return true}return false}};BFR.util.ElementHash=function(k,j,g){var f={},c={},l={},h=function(m){if(c[m]){c[m]+=1}else{c[m]=1;l[m]=0}return m+"_"+c[m]},a=document.getElementsByTagName(k);for(var e=0;e<a.length;e++){var d=a[e].getAttribute(j);if(d&&g&&d.length>=g.length&&d.indexOf(g)!=-1){var b=h(d);f[b]=a[e]}}this.getElemForUniqueAttr=function(m){return f[m]}};function showKPTime(){var b=new Date();var g=b.getFullYear();var e=b.getMonth()+1;var c=b.getDate();var h=b.getDay();var j=b.getHours();var d=b.getMinutes();var k=b.getSeconds();var a=new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六");if(e<10){e="0"+e}if(c<10){c="0"+c}if(j<10){j="0"+j}if(d<10){d="0"+d}var f=kOrB(h,""+j+d,""+e+c);if(f){document.getElementById("time_show").innerHTML=g+"年"+e+"月"+c+"日"+j+":"+d+" "+a[h]+"&nbsp;&nbsp;<strong><font color=#D20000>开市！</font></strong>"}else{document.getElementById("time_show").innerHTML=g+"年"+e+"月"+c+"日"+j+":"+d+" "+a[h]+"&nbsp;&nbsp;<strong><font color=#D20000>闭市！</font></strong>"}}function kOrB(b,a,c){if(b==0||b==6){return false}if((c=="0501")||(c=="0622")||(c=="1001")||(c=="1002")||(c=="1003")||(c=="1004")||(c=="1005")){return false}if((a>="0929"&&a<="1130")||(a>="1300"&&a<="1500")){return true}return false}window.setInterval("showKPTime()",60000);showKPTime();var addEvent;if(window.attachEvent){addEvent=function(b,c,a){b.attachEvent("on"+c,function(){a.call(b,window.event)})}}else{addEvent=function(b,c,a){b.addEventListener(c,a,false)}}function stopEvent(a){if(window.event){a.returnValue=false}else{a.preventDefault()}}function get(a){return document.getElementById(a)}function max(){var b=arguments;var a=Number.MIN_VALUE;for(var c=0;c<b.length;c++){if(b[c]>a){a=b[c]}}return a}var ap=Array.prototype;ap.each=function(b){for(var a=0;a<this.length;a++){b.call(this,this[a])}};ap.pushAll=function(b){for(var c=0;c<b.length;c++){this.push(b[c])}return this};ap.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1};(function(){function a(b){if(typeof b=="string"){this.element=document.getElementById(b)}else{if(b.tagName){this.element=b}}}a.prototype={tagIs:function(d,f){ts=this.element.getElementsByTagName(d);if(arguments.length==1){var c=[];for(var e=0;e<ts.length;e++){c.push(ts[e])}return c}else{if(arguments.length==2){var b=[];for(var e=0;e<ts.length;e++){if(ts[e].className.indexOf(f)!=-1){b.push(ts[e])}}return b}}},setStyle:function(d,c){try{this.element.style[d]=c}catch(b){}return this},hasClass:function(b){var c=new RegExp("(^| )"+b+"( |$)");if(c.test(this.element.className)){return true}return false},addClass:function(b){if(this.element.className){this.element.className+=" "+b}else{this.element.className=b}return this},removeClass:function(b){var c=new RegExp("(^| )"+b+"( |$)");this.element.className=this.element.className.replace(c,"");return this},on:function(c,b){addEvent(this.element,c,b);return this},attr:function(b,c){this.element.setAttribute(b,c);return this}};window.G=function(){return new a(arguments[0])}})();function installTabMod(b,a){b.each(function(c){c[0].each(function(e){var d=this;e.onmouseover=function(){if(G(this).hasClass(a)){return}d.each(function(f){G(f).removeClass(a)});G(this).addClass(a);c[1].each(function(f){f.style.display="none"});c[1][d.indexOf(this)].style.display=""}})})}function max(){var b=arguments;var a=Number.MIN_VALUE;for(var c=0;c<b.length;c++){if(b[c]>a){a=b[c]}}return a}(function(){var e=G("market").tagIs("table"),f=118,b,a,g=0.4,c=10,d=0,h=true;e.each(function(j){var k=G(j),l=k.tagIs("tr");j.cur=k.tagIs("div")[0];l.each(function(n){var m=G(n);if(m.hasClass("tab")){m.setStyle("cursor","pointer");m.on("mouseover",function(r){if(!this.targetDiv){var q=this.nextSibling;while(!q.tagName){q=q.nextSibling}this.targetDiv=q.getElementsByTagName("div")[0]}var o=G(this.targetDiv),p=G(j.cur);if(o.hasClass("show")||!h){return}var s=this.targetDiv;if(!h){return}if(b){clearInterval(b)}if(a){clearTimeout(a)}a=setTimeout(function(){b=setInterval(function(){h=false;if(d<f-10){d+=Math.round(g*(f-d));j.cur.style.height=f-d+"px";s.style.height=d+"px"}else{clearInterval(b);p.setStyle("height","0px");p.removeClass("show");o.addClass("show");o.setStyle("height",f+"px");j.cur=s;d=0;h=true}},c)},200)})}})})})();